# Исправление проблем с кодировкой русского текста

Этот документ описывает решение проблемы с отображением русских символов ("крокозябры") в консольном выводе.

## Проблема

В оригинальной версии проекта весь русскоязычный текст в консоли отображался некорректно - вместо нормальных кириллических букв выводились "крокозябры". Проблема проявлялась во всех Windows-консолях (cmd, PowerShell, VS Code Terminal).

## Решение

### 1. Установка кодовой страницы консоли (main.c)

Добавлен код установки UTF-8 кодовой страницы в начале программы:

```c
#ifdef _WIN32
    /* Set console code page to UTF-8 for correct Russian text display */
    SetConsoleOutputCP(CP_UTF8);
    SetConsoleCP(CP_UTF8);
#endif
```

Это обеспечивает:
- Корректный вывод русских символов в stdout
- Корректный ввод русских символов (если требуется)
- Правильный рендеринг псевдографики и рамок

### 2. Флаги компиляции (Makefile)

Добавлены флаги компиляции для корректной обработки UTF-8:

```makefile
CFLAGS = -Wall -Wextra -std=c99 -finput-charset=UTF-8 -fexec-charset=UTF-8
```

Эти флаги указывают компилятору GCC:
- `-finput-charset=UTF-8` - исходные файлы в кодировке UTF-8
- `-fexec-charset=UTF-8` - результирующая программа использует UTF-8

### 3. Кроссплатформенность

Добавлена поддержка компиляции как под Windows, так и под Linux/Unix:

```c
#ifdef _WIN32
#include <windows.h>
#endif
```

Функции работы с консолью (`clear_screen`, `set_cursor`, `get_cursor`) теперь имеют реализацию для обеих платформ.

## Проверка исходных файлов

Все исходные файлы проекта:
- ✅ Сохранены в кодировке UTF-8
- ✅ Не содержат BOM (Byte Order Mark)
- ✅ Компилируются без предупреждений

## Тестирование

Создан тестовый файл `test_utf8_output.c` для проверки корректности отображения русского текста.

### Компиляция теста:
```bash
gcc -Wall -Wextra -std=c99 -finput-charset=UTF-8 -fexec-charset=UTF-8 test_utf8_output.c -o test_utf8_output
```

### Запуск теста:
```bash
./test_utf8_output
```

Если русский текст отображается корректно - проблема решена!

## Результат

После применения исправлений:
- ✅ Все меню, подписи, подсказки и игровые тексты выводятся читаемым русским языком
- ✅ Проект компилируется без предупреждений о кодировке
- ✅ Никаких "крокозябр" ни в одной части приложения
- ✅ Исходники чистые, однородные, в UTF-8 без BOM
- ✅ Установка кодовой страницы выполняется один раз в `main.c`, до любого вывода
- ✅ Псевдографика (ASCII-рамки) отображается корректно

## Дополнительная информация

### Для Windows
Программа автоматически устанавливает кодовую страницу UTF-8 при запуске.

### Для Linux/Unix
Убедитесь, что ваша локаль поддерживает UTF-8 (обычно это `ru_RU.UTF-8` или `en_US.UTF-8`).

### IDE настройки
При работе с проектом в IDE убедитесь, что:
- Кодировка файлов установлена на UTF-8
- Без BOM
- IDE не конвертирует кодировку автоматически

## Примеры корректного вывода

```
========== ГЛАВНОЕ МЕНЮ ==========
1. Играть
2. Настройки
0. Выход
==================================
Ваш выбор:
```

```
[+10 очков] Победа!
[-10 очков] Поражение!
```

```
========== МЕНЮ ИГР ==========
1. Счастливчик
2. Найди пары
3. Сапёр
4. Крестики-нолики
5. Тетрис
6. Назад
0. Выход
==============================
```
